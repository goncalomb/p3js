<!DOCTYPE html>
<html>
	<!--
	Copyright (c) 2016 Gonçalo Baltazar <me@goncalomb.com>

	Source Code on GitHub: https://github.com/goncalomb/p3js

	P3JS is released under the terms of the MIT License.
	See LICENSE.txt for details.
	-->
	<head>
		<meta charset="UTF-8">
		<meta name="description" content="A JavaScript assembler and simulator for the P3 educational CPU.">
		<meta name="keywords" content="Assembler,Simulator,P3,CPU,IST">
		<meta name="author" content="goncalomb">
		<link rel="shortcut icon" href="static/favicon.ico">
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/bootswatch/3.3.6/flatly/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/fontawesome/4.5.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/codemirror/4.5.0/codemirror.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/codemirror/4.5.0/addon/lint/lint.min.css">
		<link rel="stylesheet" type="text/css" href="static/css/main.css">
		<link rel="stylesheet" type="text/css" href="static/css/draggable.css">
		<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/2.2.0/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.ui/1.11.4/jquery-ui.min.js"></script>
		<script type="text/javascript" src="https://cdn.jsdelivr.net/g/codemirror@4.5.0(codemirror.min.js+addon/display/rulers.js+addon/lint/lint.js)"></script>
		<script type="text/javascript" src="static/js/p3js-bundle.js"></script>
		<script type="text/javascript" src="static/js/p3js-web-bundle.js"></script>
		<title>P3JS Assembler and Simulator</title>
	</head>
	<body class="container-fluid">
		<header class="row">
			<h1>P3JS Assembler and Simulator</h1>
			<p>A JavaScript assembler and simulator for the P3 educational CPU. <a href="#about">More Information</a>.</p>
		</header>
		<ul class="nav nav-tabs" style="margin-bottom: 20px;">
			<li><a href="#assembler"><i class="fa fa-code"></i> Assembler</a></li>
			<li><a href="#program"><i class="fa fa-area-chart"></i> Program</a></li>
			<li><a href="#simulator"><i class="fa fa-cogs"></i> Simulator</a></li>
			<li><a href="#io"><i class="fa fa-laptop"></i> Input/Output</a></li>
			<li><a href="#roms"><i class="fa fa-tasks"></i> ROMs</a></li>
			<li><a href="#about"><i class="fa fa-question-circle"></i> About P3JS</a></li>
			<li class="pull-right"><a id="fullscr" href="#"><i class="fa fa-arrows-alt"></i> Fullscreen Mode</a></li>
		</ul>
		<div class="row tab-page tab-page-assembler">
			<div class="col-md-9">
				<div id="code-wrapper">
					<textarea id="code"></textarea>
				</div>
			</div>
			<div class="col-md-3">
				<div class="form-group">
					<label for="asm-editor-files">Your Files:</label>
					<select id="asm-editor-files" class="form-control">
						<option style="display: none;" value="" disabled selected> -- select a file -- </option>
					</select>
				</div>
				<div class="btn-group btn-group-xs" style="width: 100%">
					<button id="asm-editor-new" class="btn btn-primary" style="width: 25%" title="New"><i class="fa fa-asterisk"></i> New</button>
					<button id="asm-editor-save" class="btn btn-primary" style="width: 45%" title="Save"><i class="fa fa-floppy-o"></i> Save</button>
					<button id="asm-editor-download" class="btn btn-info" style="width: 15%" title="Download"><i class="fa fa-download"></i></button>
					<button id="asm-editor-delete" class="btn btn-danger" style="width: 15%" title="Delete" disabled><i class="fa fa-trash"></i></button>
				</div>
				<hr>
				<div class="form-group">
					<label for="asm-editor-demos">Demos:</label>
					<select id="asm-editor-demos" class="form-control">
						<option style="display: none;" value="" disabled selected> -- select a demo -- </option>
					</select>
				</div>
				<hr>
				<button id="assemble" class="btn btn-primary btn-sm btn-block">Assemble</button>
				<button id="assemble-run" class="btn btn-primary btn-sm btn-block">Assemble and Run</button>
				<button id="assemble-dl" class="btn btn-primary btn-sm btn-block">Assemble and Download</button>
				<div class="well well-sm" style="margin-top: 20px;">
					<ul id="asm-info" class="list-unstyled" style="margin: 0;"></ul>
				</div>
				<div class="checkbox">
					<label title="Shows errors on the editor as you write the code.">
					<input id="asm-use-linter" type="checkbox" checked>Use linter</label>
				</div>
				<div class="checkbox">
					<label title="Shows rulers to help align the code.">
					<input id="asm-show-rulers" type="checkbox" checked>Show rulers</label>
				</div>
				<div class="checkbox">
					<label title="Shows extra rulers to help align the comments.">
					<input id="asm-show-extra-rulers" type="checkbox">Show extra rulers</label>
				</div>
			</div>
		</div>
		<div class="row tab-page tab-page-program hidden">
			<div class="col-md-12">
				<h3>Memory Footprint <small id="prog-mem-info"></small></h3>
				<canvas id="prog-memory-footprint"></canvas>
				<h3>Labels / References <small id="prog-label-info"></small></h3>
				<pre id="prog-labels" class="well"></pre>
			</div>
		</div>
		<div class="row tab-page tab-page-simulator hidden">
			<div class="col-md-9">
				<table>
					<tr>
						<td><textarea id="sim-debug-main" rows="15" readonly></textarea></td>
						<td class="hidden"><textarea id="sim-debug-control" rows="15" readonly></textarea></td>
						<td>
							<textarea id="sim-memory0" readonly></textarea>
							<textarea id="sim-memory1" readonly></textarea>
						</td>
					</tr>
				</table>
			</div>
			<div class="col-md-3">
				<pre id="sim-status" class="well well-sm"></pre>
				<button id="sim-start" class="btn btn-primary btn-sm btn-block">Start</button>
				<button id="sim-step-i" class="btn btn-primary btn-sm btn-block">Step</button>
				<button id="sim-step-c" class="btn btn-primary btn-sm btn-block hidden">Step (Clock)</button>
				<button id="sim-reset" class="btn btn-primary btn-sm btn-block">Reset</button>
				<div class="checkbox"><label><input id="sim-show-ctrl" type="checkbox">Show Control Unit</label></div>
				<div class="checkbox"><label><input id="sim-show-io" type="checkbox">Show IO</label></div>
			</div>
		</div>
		<div class="row tab-page tab-page-io hidden">
			<div class="col-md-12">
				<div id="io-board">
					<textarea id="io-board-lcd" cols="12" rows="2" readonly></textarea>
					<div id="io-board-leds"></div>
					<div id="io-board-7seg"></div>
					<div id="io-board-buttons"></div>
					<div id="io-board-switches"></div>
				</div>
				<div id="io-terminal-wrapper">
					<textarea id="io-terminal" cols="82" rows="24" readonly></textarea>
				</div>
			</div>
		</div>
		<div class="row tab-page tab-page-roms hidden">
			<div class="col-md-12">
				<p class="text-info">
					<i class="fa fa-info-circle"></i> <strong>There is no interface to edit the ROMs at the moment. Sorry.</strong><br>
					<span class="small">If you are a hacker, try changing these JavaScript variables: <code>p3sim._romA</code>, <code>p3sim._romB</code> and <code>p3sim._romC</code>.</span>
				</p>
			</div>
			<div class="col-md-4">
				<h3>ROM A <small></small></h3>
				<textarea id="rom-a" rows="33" readonly></textarea>
			</div>
			<div class="col-md-4">
				<h3>ROM B <small></small></h3>
				<textarea id="rom-b" rows="17" readonly></textarea>
			</div>
			<div class="col-md-4">
				<h3>ROM C <small></small></h3>
				<textarea id="rom-c" rows="33" readonly></textarea>
			</div>
		</div>
		<div class="row tab-page tab-page-about hidden">
			<div class="col-md-12">
				<h3>P3 CPU</h3>
				<p>The P3 is a 16 bit CPU used at <a href="http://tecnico.ulisboa.pt/en/" target="_blank">Instituto Superior Técnico</a> (IST) as a learning tool for Computer Engineering students.</p>
				<p>It is described in chapters 10, 11 and 12 of the book:</p>
				<p style="margin-left: 20px;">
					Arquitectura de Computadores: Dos Sistemas Digitais aos Microprocessadores<br>
					G. Arroz, J. Monteiro, A. Oliveira<br>
					IST Press
				</p>
				<p>There are several official assemblers and simulators available for the CPU.</p>
				<p>For more information on the P3 CPU and simulators (in Portuguese) check:</p>
				<ul>
					<li><a href="http://algos.inesc-id.pt/arq-comp/" target="_blank">Book Information</a></li>
					<li><a href="http://algos.inesc-id.pt/arq-comp/?Material_Did%C3%A1tico___Processador_P3" target="_blank">Book Information (P3)</a></li>
					<li><a href="https://fenix.tecnico.ulisboa.pt/downloadFile/3779579934970/Manual_P3.pdf" target="_blank">Official Simulator Manual</a> (<a href="https://fenix.tecnico.ulisboa.pt/downloadFile/3779573897310/Manual_P3.pdf" target="_blank">alt</a>)</li>
				</ul>
				<h3>P3JS</h3>
				<p>The P3JS is an unofficial JavaScript assembler and simulator for the P3 CPU. It runs directly on the browser without any installation.</p>
				<p>This is a open-source project. The Source Code is <a href="https://github.com/goncalomb/p3js" target="_blank">available on GitHub</a> (MIT License).</p>
				<p>Please contact me with any issues or suggestions:</p>
				<p style="margin-left: 20px;">
					Gonçalo Baltazar<br>
					Web: <a href="http://goncalomb.com" target="_blank">goncalomb.com</a><br>
					Email: contact<span class="hidden">.hahaha</span>@<span class="hidden">rekt</span>goncalomb<span class="hidden">.example</span>.com<br>
				</p>
			</div>
		</div>
		<footer>
			<hr>
			<p>Made by <a href="http://goncalomb.com" target="_blank">Gonçalo Baltazar</a> | <a href="#about"><i class="fa fa-question-circle"></i> About P3JS</a> | <a href="https://github.com/goncalomb/p3js" target="_blank">Source Code on <i class="fa fa-fw fa-github-alt"></i> GitHub</a></p>
		</footer>
	</body>
</html>
